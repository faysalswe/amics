<div class="details-container content-block dx-card responsive-paddings">
    <div class="pmdetails-container ">
        <dx-form [(formData)]="pmDetails" labelMode="floating" labelLocation="left" (submit)="handleSubmit($event)">
            <dxi-item itemType="group" [colCount]="2">
                <dxi-item itemType="group" [colCount]="2">
                    <dxi-item dataField="itemNumber" [colSpan]="1" [isRequired]="true"></dxi-item>
                    <dxi-item dataField="itemType" [colSpan]="1" [label]="{ text: 'MFR' }"></dxi-item>
                </dxi-item>
                <dxi-item itemType="group" [colCount]="4">
                    <dxi-item dataField="uomref" [label]="{ text: 'UOM' }"></dxi-item>
                    <dxi-item dataField="leadTime" [label]="{ text: 'Maintenance(days)' }"></dxi-item>
                    <dxi-item dataField="itemClass" [colSpan]="1"></dxi-item>
                    <dxi-item dataField="itemCode" [colSpan]="1"></dxi-item>
                </dxi-item>
            </dxi-item>
            <dxi-item itemType="group" [colCount]="2">
                <dxi-item dataField="description" [colCount]="1" editorType="dxTextArea"
                    [label]="{text: 'Description (Max 150 characters)'}">

                </dxi-item>
                <dxi-item itemType="group" [colCount]="3">
                    <dxi-item dataField="cost"></dxi-item>
                    <dxi-item dataField="markup"></dxi-item>
                    <dxi-item dataField="price"></dxi-item>
                </dxi-item>
            </dxi-item>
            <dxi-item itemType="group" [colCount]="2">
                <dxi-item itemType="group" [colCount]="2">
                    <dxi-item>
                        <dx-lookup [items]="warehouseNames" [(value)]="pmDetails.warehouse" [placeholder]="warehouseLbl"
                            [label]="warehouseLbl" searchMode="contains" [minSearchLength]="1" [searchEnabled]="true"
                            [showClearButton]="true" [showDataBeforeSearch]="true"
                            (onValueChanged)="updateWarehouseSelection(this.pmDetails.warehouse)">
                            <dxo-drop-down-options [showTitle]="true"></dxo-drop-down-options>
                        </dx-lookup>
                    </dxi-item>

                    <dxi-item>
                        <dx-lookup [items]="validLocationNames" [(value)]="pmDetails.location"
                            [placeholder]="locationLbl" [label]="locationLbl" [searchEnabled]="true"
                            [showClearButton]="true">
                            <dxo-drop-down-options [showTitle]="true"></dxo-drop-down-options>
                        </dx-lookup>
                    </dxi-item>

                </dxi-item>
                <dxi-item itemType="group" [colCount]="3">
                    <dxi-item [colCount]="1" editorType="dxRadioGroup"
                        [editorOptions]=" {items: invTypes, value: pmDetails.invType, layout: 'horizontal' }"
                        style="align-items:center;background-color: #F4F5F6;">

                    </dxi-item>
                    <dxi-item itemType="group" [colCount]="3" [colSpan]="2" class="checkClass"
                        style="align-items:center;background-color: #F4F5F6;">&nbsp; &nbsp;
                        <dxi-item editorType="dxCheckBox"
                            [editorOptions]="{ text: 'Obsolete', value: pmDetails.obsolete}">
                        </dxi-item> &nbsp; &nbsp;
                        <dxi-item editorType="dxCheckBox" [editorOptions]="{ text: 'TAA', value: pmDetails.userBit}">
                        </dxi-item>
                        &nbsp; &nbsp;
                        <dxi-item editorType="dxCheckBox"
                            [editorOptions]="{ text: 'Create PO', value: pmDetails.userBit2}">
                        </dxi-item>
                    </dxi-item>
                </dxi-item>
            </dxi-item>
        </dx-form>
    </div>
</div>

<div class="details-container content-block dx-card responsive-paddings">
    <ng-container [ngSwitch]="selectedChild">
        <ng-container *ngSwitchCase="childType.BOM">
            <dx-data-grid id="gridContainer" [dataSource]="bomDetails" keyExpr="id" height="54vh"
                [allowColumnReordering]="true" [focusedRowEnabled]="true" [showBorders]="true" [showColumnLines]="true"
                [allowColumnResizing]="true" [rowAlternationEnabled]="true">
                <dxo-load-panel [enabled]="false"></dxo-load-panel>
                <dxo-scrolling mode="infinite"></dxo-scrolling>
                <dxo-selection mode="single"></dxo-selection>
                <dxi-column dataField="lineNum" dataType="number"></dxi-column>
                <dxi-column dataField="itemtype" dataType="string" caption="MFR."></dxi-column>
                <dxi-column dataField="itemNumber" caption="Part Number" dataType="string"></dxi-column>
                <dxi-column dataField="description" dataType="string"></dxi-column>
                <dxi-column dataField="quantity" dataType="number"></dxi-column>
                <dxi-column dataField="uomref" dataType="string"></dxi-column>
                <dxi-column dataField="ref" dataType="string"></dxi-column>
                <dxi-column dataField="comments" dataType="string"></dxi-column>
                <dxi-column dataField="cost" dataType="number" format="currency"></dxi-column>
                <dxi-column dataField="extCost" dataType="number" format="currency"></dxi-column>

                <dxo-summary>
                    <dxi-total-item column="cost" summaryType="sum" displayFormat="{0}" valueFormat="currency">
                    </dxi-total-item>
                    <dxi-total-item column="extCost" summaryType="sum" displayFormat="{0}" valueFormat="currency">
                    </dxi-total-item>
                </dxo-summary>
            </dx-data-grid>
        </ng-container>
        <ng-container *ngSwitchCase="childType.PO">
            <dx-data-grid id="gridContainer" [dataSource]="poDetails" keyExpr="id" height="54vh"
                [focusedRowEnabled]="true" [allowColumnResizing]="true" [showBorders]="true" [showColumnLines]="true"
                [rowAlternationEnabled]="true"
                [columns]="['linenum','pomain', 'supplier', 'quantity', 'received', 'somain']" [showBorders]="true">
                <dxo-load-panel [enabled]="false"></dxo-load-panel>
                <dxo-scrolling mode="infinite"></dxo-scrolling>
                <dxo-selection mode="single"></dxo-selection>

            </dx-data-grid>
        </ng-container>
    </ng-container>
</div>